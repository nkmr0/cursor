---
marp: true
paginate: true
---

<style>
/* デフォルトテーマのインポート */
@import url('./themes/default.css');
</style>

<!-- _class: lead -->

# Cursor 活用法

---

## 1. イントロダクション

### 本日のゴールとアジェンダ

-   **現状認識**: 基本的な Cursor の操作はできている前提で進める
-   **ゴール**: Cursor の仕組みを理解し、開発プロセスの中に積極的に活用できるようになる

---

### コア機能の利用率

Cursor の利用状況は以下のページで確認できる：

-   設定ページ: https://www.cursor.com/ja/settings
-   分析ページ: https://www.cursor.com/ja/analytics

---

## 2. Cursor コア機能の再確認

### Tab: 文脈に応じた自動補完

-   **文脈に応じた複数行生成**:
    -   周囲のコードパターンやコメントを読み取り
    -   自然で適切な複数行コード（関数本体、クラス定義など）を提案
-   **スタイル学習**:
    -   プロジェクト内の既存コードからコーディングスタイルを学習
    -   インデント、命名規則などの一貫性を保持
-   **軽微なエラー修正**:
    -   タイプミスや閉じ括弧忘れなどの簡単な構文エラーを自動修正

---

### Cmd/Ctrl+K (インライン): ピンポイント AI 修正

**選択範囲への精密指示**:

-   コードの一部を選択し、具体的な指示を与える(その範囲に限定した AI 操作が可能)

**例**:

-   「この関数をリファクタリングして、可読性を向上させて」
-   「このクラスにドキュメントコメントを追加して」
-   「この処理に対応するユニットテストを生成して」

**Tips**:

-   小〜中規模のコード修正に最適
-   特定部分のコード生成、ドキュメント/テスト生成に有効
-   指示が具体的であるほど、期待に近い結果が得られる

---

### Cmd/Ctrl+L (チャット/エージェント): コードベース対話ハブ

**Ask モード**:

-   コードベース全体や特定ファイルについて質問
-   解説要求、関連ドキュメント検索などに使用
-   例：「この関数の役割は？」「このエラーの原因は？」

**Agent モード**:

-   より複雑で自律的なタスクを実行
-   複数ファイルにまたがる変更
-   ターミナルコマンドの実行（ビルド、テストなど）
-   エラー発生時の自動修正試行ループ
-   コード生成

---

## 3. コンテキストの重要性

### なぜ質が重要か？

**AI の回答精度はコンテキストの質に依存**:

-   LLM は与えられた情報のみを基に回答を生成
-   コンテキストが不十分/不正確だと、推測や見当違いの回答になる

**適切な情報伝達で AI の能力を最大化**:

-   関連性の高いファイルを正確に指定
-   背景情報を適切に伝達
-   ゴミを入れればゴミが出てくる（GIGO 原則）

---

### コードインデックスとコンテキスト意識

**ローカルでのインデックス作成:**

-   Cursor はプロジェクトを開くと、コードベースの構造を解析
-   ファイル、関数、クラスなどのインデックスを作成
-   @シンボルでの参照やコードベース全体の質問が可能に

**参考ドキュメント:**

-   [コードベースインデックス](https://docs.cursor.com/context/codebase-indexing)
-   [ファイル除外設定](https://docs.cursor.com/context/ignore-files)

---

### AI が見ているものを意識する

**明示的な指定:**

-   `@` で明示的に指定されたファイルやリンク
-   User Rules
-   Project Rules(.cursorrules)

**暗黙的な指定:**

-   現在アクティブなエディタタブ
-   開いているファイルの Linter Error
-   Agent モードでの読み込みファイル

---

### @シンボルエコシステム解説

-   **`@files&folder`**: 特定のファイル/フォルダを参照対象に追加
-   **`@web`**: 指定 URL の Web ページ内容を参照対象に追加
-   **`@Docs`**: 事前登録したチーム固有ドキュメントを参照
-   **`@git`**: Git 情報を参照（`@git log`, `@git diff`）
-   **`@terminal`**: ターミナル情報の共有（テスト結果、ログなど）

**Tips**:

-   複数の`@`シンボルを組み合わせて精度の高いコンテキストを提供
-   質問や指示に応じて適切な情報源を選択

---

### チームナレッジのルール化＆ドキュメント化

**目的**:

-   チームの開発ルールとドキュメントを適切に管理
-   AI のコンテキストとして活用し、一貫性のある開発を促進

**メリット**:

-   チーム内ルールの遵守を自然に促進
-   レビューの手間削減
-   新規メンバーのオンボーディング効率化
-   ドキュメントに基づいた正確なコード生成/修正

---

### チームナレッジの管理方針

**外部サービス**:

-   API 仕様書など、外部サービスの最新仕様
-   `@Docs`で管理

**内部ルール**:

-   コーディング規約、設計標準、インフラ構成
-   `.cursor/rules`で管理

**追加方法**:

-   外部サービス: チャットで`@Docs`→Add new doc
-   内部ルール: `.cursor/rules`に直接記述

---

### 個人用 Notepad の活用

**目的**:

-   頻繁に使用するプロンプトの保存
-   特定タスクの指示を再利用可能に

**方法**:

-   Cursor の設定から Notepad オプションを有効化
-   @シンボルから参照可能

**Tips**:

-   よく使うプロンプトのテンプレート化
-   タスク固有のメモをまとめて保存
-   定期的な更新・整理で効率化

---

## 4. Cursor におけるワークフローの効率化

### エージェント駆動開発 ("Vibe Coding")

**コンセプト**:

-   開発者が大まかな指示や方向性を示す
-   AI (Agent)が具体的な実装の大部分を担当
-   人間はレビューや軌道修正を行うガイド役に

**可能性**:

-   アイデアの高速プロトタイピング
-   API クライアント生成などの定型的な機能実装
-   大幅な時間短縮が期待可能

---

### エージェント駆動開発の注意点

**コード品質のばらつき**:

-   AI は常に最適で安全なコードを生成するとは限らない
-   冗長、非効率、脆弱なコードの可能性

**理解不足のリスク**:

-   AI が生成したコードの動作原理の理解が重要
-   デバッグ困難な問題や予期せぬ副作用のリスク

**レビュー必須**:

-   生成コードは必ず人間がレビュー
-   テストの実施は必須

[実践例](https://github.com/animalife/anikar_user_api/pull/1019)

---

### 開発プロセスにおける Cursor の活用：エラー分析とデバッグ

**エラー分析**:

-   エラーメッセージやスタックトレースをコピー
-   チャットで Cmd/Ctrl+K を使用
-   「原因は何？」「どう修正すればいい？」と質問
-   迅速な原因究明と修正案の提示

**ログを活用した反復修正**:

1. 詳細なログ出力の追加
2. プログラム実行とログ取得
3. ログ情報を AI に提供して分析
4. 修正 → 再実行 → 確認のサイクル

---

### テストとレビューとコミット

**テスト生成/改善**:

-   対象を指定してテスト生成を依頼
-   カバレッジ向上やエッジケースのテスト追加

**レビュー依頼**:

-   ローカルで AI レビューを実施
-   `git diff --staged | clip`でコンテキスト提供

**コミット**:

-   メッセージの自動生成
-   cursorrules でフォーマット指定可能

---

### 自動化モード

**Auto Applay モード**:

-   AI 提案の自動適用
-   デバッグ高速化
-   意図しない変更に注意

**Auto Run モード**:

-   コマンドの自動承認
-   危険性を考慮
-   初心者は無効推奨

---

### 効果的なプロンプトエンジニアリング

**良いプロンプトの要素**:

-   **明確性**: 具体的な目標指定
-   **具体性**: 対象、出力形式、制約条件の明示
-   **背景情報**: 変更理由、文脈、関連要素の説明
-   **役割付与**: 専門的視点の指定

**テクニック**:

-   音声入力の活用
-   AI への逆質問による精度向上

---

## 5. チームでの Cursor 活用：カスタマイズと標準化

### プロジェクトルールの設計

**目的**:

-   AI の振る舞いとコーディングスタイルの標準化
-   チーム間の一貫性確保
-   レビュー効率の向上

**設定場所**:

-   `.cursorrules`ファイル
-   `.cursor/rules.md`

---

### プロジェクトルールの内容例

-   **プロジェクト固有指示**:
    -   「RESTful 原則に従うこと」
-   **コーディング規約**:
    -   「TypeScript 型は厳密に定義」
-   **技術スタック指定**:
    -   「状態管理は Zustand 使用」
-   **AI 振る舞いガイド**:
    -   「エラーハンドリング必須」
-   **MCP 利用ルール**:
    -   「DB 書き込み操作禁止」

---

### グローバルルールとモデル選択

**個人設定 (Global Rules)**:

-   Settings > Features > Rules for AI
-   全プロジェクト共通の指示を設定

**モデル選択**:

-   **Auto-select**: タスクに応じた自動選択
-   **特定モデル指定**: 高性能モデルの明示的選択
-   **Large Context Mode**: 広範囲の参照が必要な場合

---

## 6. MCP と外部ツール連携

### MCP とは？

**概要**:

-   IDE 外のツールやデータソースとの対話機能
-   Jira, GitHub API, 社内 DB 等との連携
-   コンテキストスイッチの削減

**目的**:

-   開発ワークフローの IDE 内完結
-   効率的な情報アクセス
-   自動化の促進

---

### MCP 連携例

**ツール連携**:

-   Jira/GitHub: チケット管理、PR レビュー
-   Slack: ビルド通知、過去の議論参照
-   Figma: デザインスペック参照

**情報アクセス**:

-   DB: スキーマ確認、テストデータ確認
-   Web 検索

**自動化/支援**:

-   ブラウザ操作自動化
-   Git 操作補助

---

### MCP 導入手順

1. **有効化**:
    - Settings > Features > MCP をオン

2. **サーバー設定**:
    - `.cursor/mcp.json`
    - `~/.cursor/mcp.json`

3. **設定内容**:
    - 通信方式 (stdio, sse)
    - 起動コマンド/URL
    - 認証情報

---

### MCP の使い方と注意点

**使い方**:

-   Agent モードで指示
-   URL や特定用語を含めたタスク指定

**注意点**:

-   発展途上の技術
-   サーバー品質のばらつき
-   設定の複雑さ
-   セキュリティ考慮

**推奨**:

-   安定したサーバーから導入
-   段階的な機能拡張

---

## 7. 注意点とベストプラクティス

### 「検証」は必須

-   AI は万能ではない
-   コードレビューとテストの重要性
-   動作原理の理解

### スキル低下懸念

-   基礎能力維持の重要性
-   AI は能力「増幅」ツール
-   能動的な学習姿勢

### バージョン管理徹底

-   こまめなコミット
-   変更の追跡
-   安全な復元ポイント

---

## 8. まとめ

1. コア機能の応用的活用
2. コンテキストの質重視
3. ルール標準化とドキュメント化
4. 高度なワークフロー導入
5. MCP 活用による効率化
6. 適切な検証プロセス

### Q&A

疑問点や気になることがあれば、お気軽にご質問ください。
